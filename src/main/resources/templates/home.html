<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
                xmlns:sec="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IgniteU</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
          background-color: #272829;
          color: #fff;
      }
      .sidebar {
          height: 100vh;
          background-color: #1c1c1c;
          padding: 20px;
      }
      .content {
          padding: 20px;
      }
      .contacts {
          height: 100vh;
          overflow-y: auto;
          background-color: #1c1c1c;
          padding: 20px;
      }
      .contact {
          padding: 10px;
          border-bottom: 1px solid #444;
      }
      .contact:last-child {
          border-bottom: none;
      }
      .navbar {
          background-color: #1c1c1c;
      }
      .navbar-brand, .nav-link {
          color: #fff !important;
      }
      .nav-link:hover, .btn:hover {
          background-color: #5a5a5a !important;
          color: #fff !important;
      }
      .nav-link:active, .btn:active {
          background-color: blue !important;
          color: rgb(255, 255, 255) !important;
      }
      .dropdown-menu {
          background-color: #1c1c1c;
          border: none;
      }
      .dropdown-item {
          color: #fff !important;
      }
      .dropdown-item:hover {
          background-color: #5a5a5a !important;
      }

      .toolbar {
          display: flex;
          align-items: center;
          background-color: #f0f0f0;
          padding: 10px;
      }
      .toolbar svg {
        width: 145px;
        height: 20px;
        margin-right: 50px;
        margin-left: -20px;
        transform: scale(2);
        background-color: #1c1c1c;
      }
      .post-box {
            background-color: #242526;
            color: white;
            border-radius: 5px;
            padding: 10px;
            max-width: 600px;
            margin: auto;
        }

        .time-text {
            background-color: #3A3B3C;
            color:#D8D9DA;
            font-size: 10px;
            text-decoration: none;
            position: relative;
            margin-left: 4px;
            margin-top: -4px;
        }

        .post-box input {
            background-color: #3A3B3C;
            color: white;
            border: none;
            width: 100%;
            padding: 10px;
            border-radius: 20px;
        }
        .post-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .post-actions div {
            display: flex;
            align-items: center;
        }
        .post-actions div img {
            width: 20px;
            margin-right: 10px;
        }
        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .post-button {
            background-color:rgb(0, 0, 0); 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: background-color 0.3s ease;
            margin-left: 10px;
        }


        .comments-section {
            flex: 1;
            height: calc(100vh - 250px);
            overflow-y: scroll;
            box-sizing: border-box;
            scrollbar-width: none;
            background-color: #2a2b2c;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .ignite-comment{
            display: flex;
        }

        .comment {
            background-color: #3a3b3c;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            height: auto;
            overflow: auto;
        }
        .comment:last-child {
            margin-bottom: 0;
        }
        .comment-author {
            color: #61677A;
            display: flex; 
            align-items: center;
            justify-content: space-between; 
        }
        .comment-text {
            margin-top: 5px;
        }
        .comment-input {
            background-color: #3a3b3c;
            color: white;
            border: none;
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .post-box textarea {
            background-color: #3A3B3C;
            color: white;
            border: none;
            width: 100%;
            height: 100px; /* Ajusta la altura según sea necesario */
            padding: 10px;
            border-radius: 20px;
            resize: none; /* Desactiva el redimensionamiento del textarea */
            box-sizing: border-box; /* Asegura que el padding y el border se incluyan en el ancho y alto del textarea */
        }

        .post-box textarea:focus {
            outline: none; /* Elimina el contorno del textarea cuando está enfocado */
        }

        textarea.form-control {
            width: 100%;
            box-sizing: border-box; /* Asegura que el padding y el borde se incluyan en el ancho total */
        }

        .comments-container {
            max-height: 200px;
            overflow-y: auto;
        }

        .profile-pic {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }

        .profile-pict{
            width: 70px;
            height: 70px;
            object-fit: cover;
        }

        .comment-icon {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }

        .svg-button-bubble {
            background-image: url('data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20viewBox%3D%220%200%202000%202000%22%20width%3D%2250%22%20height%3D%2250%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20transform%3D%22translate(701%2C700)%22%20d%3D%22m0%200h598l1%201v458l-1%201-257%201-11%206-23%2014-24%2015-20%2012-22%2014-26%2016-18%2011-24%2015-42%2026-14%208-2-2v-136h-115l-1-1v-458z%22%20fill%3D%22%23FEFEFE%22/%3E%3C/svg%3E');
            background-size: cover; 
            background-position: center;
            border: none; 
            width: 50px; 
            height: 50px; 
            color: white; 
            font-size: 16px; 
            text-align: center; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin-left: -2vh;
            margin-top: 3px;
        }

        .svg-button-bubble:hover ,.svg-button-bubble:focus, .svg-button-bubble:active{
            outline: none;
            box-shadow: none;
            background-color: transparent !important;
            color: inherit !important;
            
        }


        .svg-button-share {
            background-image: url('data:image/svg+xml,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="512" height="512"><path d="M0 0 C3.03033302 2.87493132 5.05720897 5.53712041 5.94346619 9.67459106 C6.19254669 20.49485039 2.53986214 30.46511408 -0.62109375 40.6796875 C-1.27130435 42.82451227 -1.91999159 44.96979935 -2.567276 47.11550903 C-3.96073544 51.72353491 -5.36445282 56.32825964 -6.77636719 60.93066406 C-9.03790146 68.30299015 -11.27654451 75.68214596 -13.51171875 83.0625 C-15.84650562 90.76747464 -18.18288982 98.471942 -20.52804565 106.17376709 C-25.70302181 123.16984489 -30.84232868 140.1762847 -35.94140625 157.1953125 C-36.27787611 158.31827602 -36.61434597 159.44123955 -36.96101189 160.59823227 C-38.6523898 166.24402874 -40.34298986 171.89005775 -42.03323364 177.53619385 C-45.11076325 187.81507433 -48.19528199 198.09185831 -51.2791729 208.36883163 C-52.99889194 214.09997142 -54.7181742 219.83124223 -56.4375 225.5625 C-57.1249979 227.8541673 -57.8124979 230.14583396 -58.5 232.4375 C-58.8403125 233.571875 -59.180625 234.70625 -59.53125 235.875 C-60.5625 239.3125 -61.59375 242.75 -62.625 246.1875 C-62.96532068 247.32190269 -63.30564137 248.45630539 -63.6562748 249.62508392 C-64.34369121 251.91647113 -65.03110856 254.20785805 -65.71852684 256.49924469 C-67.43856335 262.23268487 -69.15858358 267.96612993 -70.87857056 273.69958496 C-73.95694124 283.96105933 -77.03541752 294.22250194 -80.11451912 304.48375702 C-81.81340721 310.14539675 -83.51219765 315.80706579 -85.2109375 321.46875 C-85.71666857 323.15427727 -85.71666857 323.15427727 -86.23261642 324.87385559 C-91.15780727 341.289508 -96.07777564 357.70672088 -100.99489617 374.1247921 C-103.45928451 382.35305743 -105.92493839 390.58094358 -108.39066696 398.80880737 C-110.54998116 406.01460962 -112.70769514 413.22088836 -114.86416054 420.42754364 C-116.2008994 424.89332101 -117.53921608 429.35862445 -118.87794113 433.82380676 C-119.49097364 435.86965887 -120.10337579 437.9157 -120.71504593 439.96195984 C-123.84602116 450.43504281 -127.02446524 460.89201579 -130.30810547 471.31835938 C-130.59242495 472.22929604 -130.87674442 473.1402327 -131.16967964 474.0787735 C-135.16656703 486.67372037 -141.05691391 497.07912664 -152.62890625 504.19921875 C-165.48849327 510.84628939 -180.12889932 513.02992492 -194.1875 508.6875 C-206.61040939 503.72870307 -216.39843673 495.01673669 -222.21075058 482.9469986 C-224.5619166 476.62533168 -225.21498616 470.1419345 -225.97130346 463.47039247 C-226.50930621 458.80594903 -227.14404194 454.15457638 -227.7762146 449.50210571 C-227.91021337 448.51221409 -228.04421214 447.52232247 -228.18227148 446.50243413 C-231.07763939 425.52491477 -235.20469096 404.75213781 -239.6875 384.0625 C-239.93177294 382.92954341 -240.17604588 381.79658682 -240.42772102 380.62929821 C-252.937113 321.14474719 -252.937113 321.14474719 -289.73352051 275.30554199 C-316.82508846 258.03701418 -349.25880412 250.13288232 -380.3125 243.4375 C-381.44826634 243.19141432 -382.58403269 242.94532864 -383.75421619 242.69178581 C-404.29644696 238.27297132 -424.92589076 234.34539919 -445.75210571 231.5262146 C-447.20785096 231.32840952 -447.20785096 231.32840952 -448.6930052 231.12660837 C-453.20919909 230.52066589 -457.72568733 229.9474326 -462.25335884 229.43415451 C-475.27900347 227.87446101 -486.68536732 224.39759211 -495.51953125 214.01171875 C-505.61264992 201.07230316 -508.27745253 188.37600326 -506.5625 172.3125 C-504.22940919 160.19085503 -496.99458334 149.33808535 -486.9370575 142.1509552 C-481.7026413 138.71133806 -476.54851185 136.70787906 -470.57421875 134.90234375 C-469.51764572 134.57362778 -468.46107269 134.2449118 -467.3724823 133.90623474 C-463.44074658 132.69160005 -459.50241631 131.50025635 -455.5625 130.3125 C-453.91895438 129.81556871 -452.2754206 129.31859826 -450.63189697 128.82159424 C-437.37590664 124.81753106 -424.10600364 120.86031618 -410.83501816 116.90629959 C-404.92432221 115.14454632 -399.01453131 113.37976303 -393.10473633 111.61499023 C-391.90172347 111.2557525 -390.69871061 110.89651476 -389.45924282 110.52639103 C-387.0051279 109.79354211 -384.55101714 109.06067924 -382.09691048 108.32780266 C-378.36190697 107.21250748 -374.62681533 106.09750786 -370.89170837 104.9825592 C-346.30376036 97.64217708 -321.72487025 90.27170484 -297.14784241 82.8948555 C-291.46156393 81.18813056 -285.77520834 79.48166259 -280.08886719 77.77514648 C-273.2179483 75.71310284 -266.34704654 73.65100219 -259.47619629 71.58872986 C-244.00315795 66.94462717 -228.52936807 62.30303498 -213.05513573 57.66291237 C-156.05508202 40.57894958 -156.05508202 40.57894958 -99.07572365 23.42614269 C-94.7136151 22.10965066 -90.35065857 20.79600063 -85.98730469 19.48364258 C-75.55099533 16.34267474 -65.12109108 13.18446087 -54.71078491 9.95819092 C-50.03468751 8.51083026 -45.35492452 7.07555654 -40.67468262 5.6416626 C-38.51935701 4.97758693 -36.36585523 4.30755457 -34.21447754 3.63079834 C-9.04716879 -4.28550101 -9.04716879 -4.28550101 0 0 Z " fill="%2322B0FF" transform="translate(506.5625,1.6875)"/><path d="M0 0 C0.7425 0.66 1.485 1.32 2.25 2 C1.16423079 2.84207601 1.16423079 2.84207601 0.05652684 3.70116365 C-2.67766147 5.94074725 -5.15664193 8.28245467 -7.65442944 10.78138161 C-8.12390223 11.24970055 -8.59337502 11.7180195 -9.07707426 12.20052993 C-10.64638739 13.7672005 -12.21211418 15.33740587 -13.77787781 16.90762329 C-14.91487443 18.04418372 -16.05209082 19.18052433 -17.18950778 20.3166641 C-20.31203334 23.43695395 -23.43143274 26.5603528 -26.55033219 29.68426657 C-29.91523964 33.05349167 -33.2830357 36.41982721 -36.65048218 39.78651428 C-42.48409065 45.61959833 -48.3158649 51.45451101 -54.14639854 57.29066849 C-62.57855563 65.73095334 -71.01347335 74.16847485 -79.44906697 82.60532491 C-93.13800467 96.29645148 -106.82470768 109.98980975 -120.51000977 123.68457031 C-133.79920467 136.98294036 -147.08944641 150.28026277 -160.38110352 163.57617188 C-161.20008288 164.39541396 -162.01906224 165.21465604 -162.86285915 166.05872364 C-166.97172608 170.16889568 -171.0806137 174.27904703 -175.18951166 178.38918805 C-206.90164458 210.11096384 -238.61081213 241.83570226 -270.3175413 273.5628792 C-270.81126122 274.05691622 -271.30498113 274.55095324 -271.81366226 275.05996108 C-273.12379407 276.3709368 -274.43392137 277.68191703 -275.7440483 278.99289763 C-277.07917434 280.32878953 -278.41449097 281.66449097 -279.75 283 C-305.10212203 275.81668526 -330.45031383 268.61964951 -355.79393387 261.40639305 C-367.56228914 258.05724807 -379.33187508 254.71255421 -391.10449219 251.37841797 C-401.36904936 248.47136878 -411.6311671 245.55588576 -421.89047885 242.63037646 C-427.31954742 241.08255753 -432.74972057 239.53890264 -438.18283844 238.00535202 C-443.30422781 236.5596454 -448.42226385 235.10262078 -453.5380249 233.63712692 C-455.40881237 233.10331943 -457.28075421 232.57353717 -459.15395355 232.04825592 C-477.14786768 226.99768969 -491.41128973 221.62260809 -501.75 205 C-508.04929102 193.72199222 -508.45695438 180.86853393 -506.05078125 168.3671875 C-502.02187327 155.07349114 -492.8611636 144.59210564 -480.75 138 C-477.48426896 136.64203417 -474.14562099 135.61251788 -470.76171875 134.58984375 C-469.70514572 134.26112778 -468.64857269 133.9324118 -467.5599823 133.59373474 C-463.62824658 132.37910005 -459.68991631 131.18775635 -455.75 130 C-454.10645438 129.50306871 -452.4629206 129.00609826 -450.81939697 128.50909424 C-437.56340664 124.50503106 -424.29350364 120.54781618 -411.02251816 116.59379959 C-405.11182221 114.83204632 -399.20203131 113.06726303 -393.29223633 111.30249023 C-392.08922347 110.9432525 -390.88621061 110.58401476 -389.64674282 110.21389103 C-387.1926279 109.48104211 -384.73851714 108.74817924 -382.28441048 108.01530266 C-378.54940697 106.90000748 -374.81431533 105.78500786 -371.07920837 104.6700592 C-346.49126036 97.32967708 -321.91237025 89.95920484 -297.33534241 82.5823555 C-291.64906393 80.87563056 -285.96270834 79.16916259 -280.27636719 77.46264648 C-273.4054483 75.40060284 -266.53454654 73.33850219 -259.66369629 71.27622986 C-244.19065795 66.63212717 -228.71686807 61.99053498 -213.24263573 57.35041237 C-156.24258202 40.26644958 -156.24258202 40.26644958 -99.26322365 23.11364269 C-94.9011151 21.79715066 -90.53815857 20.48350063 -86.17480469 19.17114258 C-75.73849533 16.03017474 -65.30859108 12.87196087 -54.89828491 9.64569092 C-50.22218751 8.19833026 -45.54242452 6.76305654 -40.86218262 5.3291626 C-38.70685701 4.66508693 -36.55335523 3.99505457 -34.40197754 3.31829834 C-7.87266014 -5.02641663 -7.87266014 -5.02641663 0 0 Z " fill="%2301D9FF" transform="translate(506.75,2)"/></svg>');
            background-size: cover; 
            background-position: center;
            border: none; 
            width: 20px; 
            height: 20px; 
            color: white; 
            font-size: 16px; 
            text-align: center; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            margin-left: 1vh;
        }

        .svg-button-share:hover ,.svg-button-share:focus, .svg-button-share:active{
            outline: none;
            box-shadow: none;
            background-color: transparent !important;
            color: inherit !important;
            
        }

        .svg-button-picture {
            width: 30px;
            height: 30px;
            object-fit: cover;
            
        }

        .svg-button-picture:hover ,.svg-button-picture:focus, .svg-button-picture:active{
            outline: none;
            box-shadow: none;
            background-color: transparent !important;
            color: inherit !important;
            
        }

        .flame-btn {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 20px;
            color: #333;
        }
        .flame {
            width: 50px;
            height: 50px;
            margin-right: -20px;
        }
        .flame path {
            fill: #ccc;
            transition: fill 0.3s ease;
        }
        .flame-btn:hover .flame path {
            fill: #ffaa33;
        }
        .flame-btn.active .flame path {
            fill: #ff4400;
        }
        .flame-btn.active .flame {
            animation: flicker 0.5s;
        }
        @keyframes flicker {
            0% { transform: scale(1) rotate(-1deg); }
            100% { transform: scale(1.05) rotate(1deg); }
        }

        .flame-btn:focus, .flame:focus {
            outline: none;
            box-shadow: none;
            box-shadow: none;
        }

        /* Estilos para el modal */
        .modal-content {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .modal-header {
            background-color: #1c1c1c;
            border-bottom: 1px solid #1c1c1c;
            padding: 15px 20px;
        }
        .modal-title {
            font-weight: bold;
            color: white;
        }

        .modal-header .modal-title:focus,
        .modal-header .modal-title:active {
            color: white;
        }

        .modal-header .close {
            color: white;
        }

        .modal-header .close:focus,
        .modal-header .close:active {
            color: white;
        }

        .modal-title:active{
            color: #61677A;
        }
        .close {
            font-size: 1.5rem;
            color: #ffffff44;
            opacity: 0.5;
        }
        .close:hover {
            opacity: 0.65;
        }

        .modal-body {
            background-color: #272829;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }
        .form-control {
            border-radius: 5px;
        }


        .form-group {
            margin-bottom: 15px;
        }

        .form-control {
            border-radius: 5px;
        }


        .modal-footer {
            border-top: 1px solid #1c1c1c;
            padding: 5px 10px;
            background-color: #1c1c1c;

            display: flex;
            justify-content: flex-end;
        }
        .bttn {
            border-radius: 5px;
            padding: 10px 20px;
        }
        .btn-primary {
            background-color: #000000;
            color: #fff;
        }
        .btn-secondary {
            background-color: #272829;
            color: #fff;
        }
        .btn-secondary:hover, .btn-primary:hover {
            opacity: 0.9;
        }

        .modal-body .btn{
            background-color: black;
            color: white;
        }

        .post-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        .comment-count {
            margin-left: -1vh;
    
        }

        .notification-item {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .notification-item.unread {
            background-color: #505050; /* Fondo gris para no leídas */
            color: white;
        }

        .notification-item.read {
            background-color: #202020; /* Fondo negro para leídas */
            color: gray;
        }

        .unread-indicator {
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1;
        }

  </style>

  </head>
    <nav class="navbar navbar-expand-lg">
        <div class="toolbar"> 
            <svg version="1.1" viewBox="0 0 2048 778" width="100" height="100" xmlns="http://www.w3.org/2000/svg">
                <path transform="translate(548,296)" d="m0 0 10 1 28 7 5 2-4 16-5 10-9 10-15 10 1 5 7 8 8 16 2 9v23l-3 13-5 10-9 12-10 8-14 8-13 5-22 4-39 1-8 5-3 6v9l3 6 5 4 8 2 10 1 69 1 17 4 16 8 10 9 7 12 4 14 1 9v14l-2 14-6 15-6 9-9 10-18 11-19 7-20 4-17 2h-36l-25-3-21-5-12-5-12-7-10-9-7-11-5-16v-13l4-13 7-10 7-6 14-7 12-3-1-6-10-8-7-11-3-11v-9l3-10 4-6 5-5 8-6 15-6-1-5-14-11-9-10-6-10-5-15-1-11v-9l2-15 5-13 6-10 9-10 9-7 14-7 16-5 12-2h33l18 4 12 4 5-8 4-10 4-15zm-71 66-12 5-8 8-5 11-1 4v17l4 12 7 8 8 5 5 2 8 1h10l13-4 6-4 7-8 4-11 1-6v-8l-3-12-6-10-5-4-10-5-4-1zm-28 193-10 5-5 5-3 5-1 3v11l4 9 9 8 12 5 9 2 9 1h28l17-3 10-4 8-6 6-8 2-7v-9l-4-9-6-5-10-3z" fill="#FEFEFE"/>
                <path transform="translate(1761,249)" d="m0 0 56 1v209l-4 23-5 15-8 16-7 9-6 7-13 10-16 8-15 5-22 4-6 1h-44l-19-3-20-6-17-8-12-9-9-9-10-15-6-14-4-14-3-17-1-8-1-34v-134l1-36h58l1 1 1 207 5 16 6 11 9 9 14 7 11 3 7 1h24l15-3 16-8 7-6 7-11 4-9 3-15 1-11v-154l1-38z" fill="#FEFEFE"/>
                <path transform="translate(1297,324)" d="m0 0h32l18 3 18 6 15 9 12 11 9 13 6 13 4 15 1 7 1 27v16l-1 6-3 2-149 1 1 10 4 15 7 13 7 7 10 6 13 4 9 1h10l17-2 14-7 9-8 8-11 4-1 15 9 20 13 3 3-6 11-7 9-13 13-13 8-11 5-15 4-11 2h-37l-20-4-18-6-13-7-13-10-7-7-9-13-8-16-6-20-2-10-1-26 1-18 4-20 5-14 9-17 10-13 8-8 13-9 14-7 20-6zm5 43-15 5-11 8-8 11-5 12-2 7v6h97l1-1-1-12-4-14-7-10-9-7-15-5z" fill="#FEFEFE"/>
                <path transform="translate(757,324)" d="m0 0h26l16 3 15 6 13 10 9 13 6 14 3 14 1 9 1 133v28l-1 1h-56l-1-1-1-156-4-11-8-9-9-4-4-1h-25l-10 3-10 6-7 6-8 14-4 17-1 9-1 126-1 1h-52l-4-2v-226l2-1h52l1 1 1 7v28l5-2 8-11 10-10 13-8 14-5z" fill="#FEFEFE"/>
                <path transform="translate(1092,273)" d="m0 0h8v53h64l2 1v42l-1 1h-64v113l3 11 4 6v2l4 2 7 3 12 1 12-2 12-5 3-1 4 6 10 28 1 8-7 6-13 5-18 4h-32l-19-5-13-7-12-11-8-13-5-15-2-12-1-13v-111h-35l-1-8v-28l2-7 9-1h25v-43l2-2 40-7z" fill="#FEFEFE"/>
                <path transform="translate(324,249)" d="m0 0 3 3-1 303h-58l-1-1v-304z" fill="#FEFEFE"/>
                <path transform="translate(912,326)" d="m0 0h54l1 1v227l-1 1h-55l-1-1v-227z" fill="#FEFEFE"/>
                <path transform="translate(940,146)" d="m0 0 4 2 12 11 8 13 5 15 1 7v18l-6 24 7-9 3-8 3 1 5 8 4 11 1 5v12l-4 13-7 10-8 9-3-1-3-14-3-4-6 12-2 1-1-14-3-9-5-12-1-4v-15l-9 7-7 8-6 13-1 6v20l1 5-4-1-10-9-8-13-3-8v-20l5-13 7-11 9-10 8-8 11-14 6-11 2-5v-11z" fill="#FEFEFE"/>
                </svg>
          </div>
        <div class="ml-auto dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <img th:if="${pfp != null}" th:src="@{'/images/' + ${pfp}}" class="rounded-circle mr-3 profile-pic" alt="User Profile Picture"></a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                <form sec:authorize="isAuthenticated()" method="post" action="/logout" class="px-4 py-3">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button type="submit" class="btn btn-danger btn-block">Logout</button>
                </form>
            </div>
        </div>
    </nav>

  <div class="container-fluid">
    <div class="row">
      <div class="col-md-2">
      </div>
        <div class="col-md-2 sidebar">
            <ul class="nav flex-column">

                <li class="nav-item">
                    <a class="nav-link" data-toggle="modal" data-target="#notificaciones" href="#">
                        Notificaciones 
                        <span th:if="${notificacionesCount > 0}" th:text="'(' + ${notificacionesCount} + ')'" class="badge badge-light"></span>
                    </a>
                    <div class="modal fade" id="notificaciones" tabindex="-1" role="dialog"
                        aria-labelledby="notificationLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document" style="max-width: 30%;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="notificationLabel">Notificaciones</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div th:if="${#lists.isEmpty(notificacionesleidas)}">
                                        <p>No tienes notificaciones nuevas.</p>
                                    </div>
                                    <div th:each="notificacion : ${notificacionesleidas}" 
                                         th:classappend="${notificacion.leida} ? 'notification-item read' : 'notification-item unread'"
                                         class="notification-item position-relative">
                                        <form th:href="@{/marcarNotificacionLeida/{id}(id=${notificacion.id})}"
                                           th:onclick="event.preventDefault(); document.getElementById('marcar-notificacion-' + [[${notificacion.id}]]).submit();"
                                           class="d-block text-decoration-none position-relative">
                                
                                            <!-- Punto blanco para indicar notificación no leída -->
                                            <div th:if="${!notificacion.leida}" class="unread-indicator"></div>
                                
                                            <div th:if="${notificacion.tipo == 'like'}">
                                                <img th:src="@{'/images/' + ${notificacion.usuarioOrigen.pfp}}"  class="rounded-circle mr-3 profile-pic" alt="Foto de perfil" width="50">    
                                                <span th:text="${notificacion.usuarioOrigen.username}"></span> le dio like a tu post: 
                                                <span th:text="${notificacion.contenido}"></span>
                                            </div>
                                            <div th:if="${notificacion.tipo == 'comentario'}">
                                                <img th:src="@{'/images/' + ${notificacion.usuarioOrigen.pfp}}"  class="rounded-circle mr-3 profile-pic" alt="Foto de perfil" width="50">
                                                <span th:text="${notificacion.usuarioOrigen.username}"></span>
                                                <span th:text="${notificacion.contenido}"></span>
                                                <!--AQUI VA LA IMAGEN EN MINIATURA DEL POST-->
                                            </div>
                                                <div th:if="${notificacion.tipo == 'solicitud_amistad'}">
                                                    <img th:src="@{'/images/' + ${notificacion.usuarioOrigen.pfp}}"  class="rounded-circle mr-3 profile-pic" alt="Foto de perfil" width="50">
                                                    <span th:text="${notificacion.usuarioOrigen.username}"></span> te ha enviado una solicitud de amistad
                                                    <ul>
                                                        <li th:each="request : ${requests}" th:if="${request.usuario.username == notificacion.usuarioOrigen.username}">
                                                            <p>Enviado por: <span th:text="${request.usuario.username}">Username</span></p>
                                                            <p>Fecha: <span th:text="${request.fechaAmistad}">Date</span></p>
                                                            <p>Estado: <span th:text="${request.estado}">Status</span></p>
                                                            
                                                            <div class="Aceptar" th:data-send-request-url="@{/accept-request}" th:data-csrf-token="${_csrf.token}">
                                                                <input type="hidden" name="requestId" th:value="${request.id}">
                                                                <button type="button" class="btn btn-aceptar btn-sm accept-request-button">Aceptar</button>
                                                            </div>
                                        
                                                            <div class="Denegar" th:data-send-request-url="@{/deny-request}" th:data-csrf-token="${_csrf.token}">
                                                                <input type="hidden" name="requestId" th:value="${request.id}">
                                                                <button type="button" class="btn btn-denegar btn-sm deny-request-button">Denegar</button>
                                                            </div>     
                                                        </li>
                                                    </ul>
                                                </div>
                                            
                                            
                                            <div th:if="${notificacion.tipo == 'solicitud_aceptada'}">
                                                <img th:src="@{'/images/' + ${notificacion.usuarioOrigen.pfp}}"  class="rounded-circle mr-3 profile-pic" alt="Foto de perfil" width="50">
                                                <span th:text="${notificacion.usuarioOrigen.username}"></span> ha aceptado tu solicitud de amistad
                                            </div>
                                            <span class="comment-time time-text" th:data-time="${notificacion.fecha}"></span>
                                        </form>
                                
                                        <!-- Formulario oculto para enviar la solicitud POST -->
                                        <form th:id="'marcar-notificacion-' + ${notificacion.id}"
                                              th:action="@{/marcarNotificacionLeida/{id}(id=${notificacion.id})}"
                                              method="post" style="display:none;">
                                        </form>
                                    </div>
                                </div>                                
                                
                            </div>
                        </div>
                    </div>

                </li>

                <li class="nav-item">
                  <a class="nav-link" href="/profile">Perfil</a>
                </li>
            </ul>
        </div>
         

        <div class="col-md-4 content">
            <div class="post-box">
                <form id="post-form" th:action="@{/createPost}" th:object="${post}" method="post" enctype="multipart/form-data">
                    <div class="d-flex align-items-center mb-3">
                        <img th:if="${pfp != null}" th:src="@{'/images/' + ${pfp}}" class="rounded-circle mr-3 profile-pict" alt="User Profile Picture">
                        <textarea id="contenido" name="contenido" th:placeholder="'¿Qué estás pensando, ' + ${username} + '?'" class="form-control" th:required="true" title="Por favor, escribe algo antes de publicar."></textarea>
                        <button type="submit" class="btn btn-primary post-button">Publicar</button>
                    </div>
                    <div class="post-actions d-flex justify-content-start">
                        <div class="action-item" onclick="triggerFileUpload();" style="cursor: pointer; margin-top: 10px;">
                            <svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                 width="30px" height="30px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">
                                <g>
                                    <path fill="#45AAB8" d="M56,54H8V18h8c1.062,0,2.078-0.422,2.828-1.172L25.656,10h12.688l6.828,6.828
                                        C45.922,17.578,46.938,18,48,18h8V54z"/>
                                    <path fill="#394240" d="M60,10H49.656l-6.828-6.828C42.078,2.422,41.062,2,40,2H24c-1.062,0-2.078,0.422-2.828,1.172L14.344,10H4
                                        c-2.211,0-4,1.789-4,4v44c0,2.211,1.789,4,4,4h56c2.211,0,4-1.789,4-4V14C64,11.789,62.211,10,60,10z M56,54H8V18h8
                                        c1.062,0,2.078-0.422,2.828-1.172L25.656,10h12.688l6.828,6.828C45.922,17.578,46.938,18,48,18h8V54z"/>
                                    <path fill="#394240" d="M32,18c-8.824,0-16,7.18-16,16c0,8.824,7.176,16,16,16s16-7.176,16-16C48,25.18,40.824,18,32,18z M32,42
                                        c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8S36.41,42,32,42z"/>
                                    <circle fill="#F9EBB2" cx="32" cy="34" r="8"/>
                                </g>
                            </svg>
                            <span style="margin-left: 5px;">Subir Foto</span>
                        </div>
                        <input type="file" id="pfp-upload" name="pfp" accept="image/*" style="display: none;" onchange="previewImage(event)">            
                    </div>
                    <div class="preview-box mt-3">
                        <img id="preview-img" src="" alt="Image Preview" style="max-width: 100%; display: none;">
                    </div>
                </form>
            </div>

          <!-- VER Posts -->
    <div class="container my-4">
            <div class="row">
                <div class="col-12">
                    <div class="comments-section rounded p-3" id="comments-section">   
                        <div  th:each="post : ${combinedPosts}" class="comment mb-3">
                            <div class="d-flex align-items-start mb-1">
                                <img th:if="${post.usuario.pfp != null}" th:src="@{'/images/' + ${post.usuario.pfp}}" class="rounded-circle mr-3 profile-pic" alt="User Profile Picture">
                                <img th:if="${post.usuario.pfp == null}" src="https://via.placeholder.com/25" 
                                class="rounded-circle mr-3 profile-pic" style="width: 40px; height: 40px;" alt="Foto de perfil por defecto">
                                <div>
                                    <strong class="comment-author" th:text="${post.usuario.username}">Autor</strong>
                                    <span class="comment-time time-text" th:data-time="${post.fecha_publicacion}"></span>
                                </div>
                            </div> 
                            <div class="comment-text" th:text="${post.contenido}"></div>
                            <div>
                                    <img th:if="${post.imageURL != null}" th:src="@{'/images/' + ${post.imageURL}}" class="post-image" alt="Post Image">  
                            </div>
                            <div class="d-flex align-items-center">
                            <form th:action="@{/like}" method="post" class="mr-3">
                                <input type="hidden" name="postId" th:value="${post.idpost}">
                                <button type="submit" class="flame-btn d-inline" th:classappend="${likesMap[post.idpost]} ? 'active' : ''">
                                    <svg class="flame" viewBox="0 0 2000 2000" xmlns="http://www.w3.org/2000/svg">
                                        <path transform="translate(987,603)" d="m0 0 10 5 17 12 15 13 11 9 8 7v2l4 2 12 12 7 8 9 10 10 13 12 17 13 20 9 16 11 22 11 27 6 18 8 33 4 23 3 31v37l-4 40-5 26-7 27-12 35-10 25-12 25-1 2 7-4 13-11 10-10 9-11 10-14 10-19 8-20 7-23 4-1 8 9 13 18 10 16 10 19 10 25 6 20 5 24 3 22 1 12v23l-4 29-6 25-6 18-9 20-9 17-8 12-12 17-13 16-7 7-7 8-8 7-12 11-18 13-5 2v-28l-2-22-5-20-6-15-8-15-13-17-7-6v17l-3 17-6 17-9 16-9 12-9 9-6 4h-2l4-20 3-23v-28l-5-25-6-18-9-20-16-31-7-16-7-19-5-19-3-18-1-11v-21l2-22 2-14-15 9-14 10-11 9-15 14-11 11-11 14-14 19-9 15-11 21-9 24-6 21-5 27-3 30v18l3 29 5 26 7 25 4 11v3l-6-2-13-9-15-12-11-9-10-9-12-12-7-6-7-8-9-10-14-19-9-13-9-15-8-16-10-25-5-16-4-21-3-23v-28l4-29 6-25 8-22 10-23 10-19 13-21 12-17 11-14 9-11 9-10 12-13 63-63 7-8 15-16 18-22 11-14 13-17 19-29 9-15 10-22 6-20 2-13v-19l-3-21-5-18-8-19-9-17z"/>
                                    </svg>
                                </button>
                                <span th:text="${likesCountMap[post.idpost]}"></span>
                            </form>
                            <button class="btn btn-link btn-sm svg-button-bubble d-inline"
                                data-toggle="modal" 
                                th:data-target="${'#postModal-' + post.idpost}">   
                            </button>
                            <span class="comment-count" th:text="${commentsCountMap[post.idpost]}"></span>
                                <button class="btn btn-link btn-sm svg-button-share d-inline"
                                data-toggle="modal" 
                                th:data-target="${'#shareModal-' + post.idpost}">
                                </button>
                            </div>
                            <!-- Modal para post específico -->
                            <div class="modal fade" th:id="${'postModal-' + post.idpost}" tabindex="-1" role="dialog"
                                th:aria-labelledby="${'postModalLabel-' + post.idpost}" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title comment-author" th:id="${'postModalLabel-' + post.idpost}"
                                                th:text="'Post de ' + ${post.usuario.username}">Post Title</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <span class="comment-time time-text" th:data-time="${post.fecha_publicacion}"></span>
                                            <p class="comment-text" th:text="${post.contenido}">Post content goes here.</p>
                                            <!-- Sección de comentarios -->
                                            <div class="comment mb-3 mt-4">
                                                <h6>Comentarios</h6>
                                                <div class="comments-list">
                                                    <!-- Los comentarios se insertarán aquí dinámicamente -->
                                                    <div class="comments-list comments-container" th:each="comentario : ${postCommentsMap[post.idpost]}">
                                                        <!-- Los comentarios se insertarán aquí dinámicamente -->
                                                        <strong th:text="${comentario.usuario.username}"></strong>:
                                                        <span th:text="${comentario.contenido}"></span>
                                                        <span class="comment-time time-text" th:data-time="${comentario.fecha_comentario}"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <form id="comment-form" th:action="@{/createComment}" th:object="${comentario}" method="post">
                                                <input type="hidden" name="postId" th:value="${post.idpost}" />
                                                <div class="d-flex align-items-center mb-3 comment-form mt-2">
                                                    <img th:if="${pfp != null}" th:src="@{'/images/' + ${pfp}}" class="rounded-circle mr-3 profile-pic" alt="User Profile Picture">
                                                    <textarea id="contenido" name="contenido" th:placeholder="'¿Comenta aqui, ' + ${username}" class="form-control"></textarea>
                                                    <button type="submit" class="btn btn-primary post-button">Publicar</button>
                                                </div>
                                            </form>
                                                
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal para compartir post-->
                            <div class="modal fade" th:id="${'shareModal-' + post.idpost}" tabindex="-1" role="dialog"
                                th:aria-labelledby="${'postModalLabel-' + post.idpost}" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title comment-author" th:id="${'shareModalLabel-' + post.idpost}"
                                                th:text="'Compartir post de ' + ${post.usuario.username}">Post Title</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="share-form" th:action="@{/compartirPost}" method="post">
                                                <input type="hidden" name="originalPost.idpost" th:value="${post.idpost}" />
                                                <div class="d-flex align-items-center mb-3 comment-form mt-2">
                                                    <img th:if="${pfp != null}" th:src="@{'/images/' + ${pfp}}" class="rounded-circle mr-3 profile-pic" alt="User Profile Picture">
                                                    <textarea id="contenido" name="comentario" th:placeholder="'Introduce un comentario, ' + ${username}" class="form-control"></textarea>               
                                                </div>
                                                <p class="comment-text" th:text="${post.contenido}">Post content goes here.</p>
                                                <div>
                                                    <img th:if="${post.imageURL != null}" th:src="@{'/images/' + ${post.imageURL}}" class="post-image" alt="Post Image">  
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Cancelar</button>
                                                    <button type="submit" class="btn btn-secondary post-button">Compartir</button>
                                                </div>
                                            </form>
                                                        
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                                                                
                        </div>
                    </div>
              
                </div>  
            </div>
    </div>
</div>
       
            <div class="col-md-2 contacts">
                <li class="nav-item d-flex align-items-center" sec:authorize="isAuthenticated()">
                    <form class="d-flex" action="/search" method="get">
                        <div class="input-group">
                            <input class="form-control" type="search" placeholder="Search" aria-label="Search" name="query">
                            <button class="btn btn-outline-success" type="submit">Search</button>
                        </div>
                    </form>
                </li>
                <h5 class="mt-3">Contactos</h5>
                <div th:if="${#lists.isEmpty(amistades)}">
                    <p>Aún no tienes contactos.</p>
                </div>
                <div th:if="${not #lists.isEmpty(amistades)}">
                    <div th:each="amistad, iterStat : ${amistades}" class="contact-item mb-3">
                        <a th:href="@{'/bandeja/' + ${amistad.id}}"
                            class="d-flex align-items-center text-decoration-none">
                            <div class="d-flex align-items-center">
                                <img th:if="${amistad.pfp != null}" th:src="@{'/images/' + ${amistad.pfp}}"
                                    class="rounded-circle mr-2" style="width: 40px; height: 40px;" alt="Foto de perfil">
                                <img th:if="${amistad.pfp == null}" src="https://via.placeholder.com/25"
                                    class="rounded-circle mr-2" style="width: 40px; height: 40px;"
                                    alt="Foto de perfil por defecto">
                                <span th:text="${amistad.username}">Nombre del contacto</span>
                            </div>
                        </a>
                        <hr th:if="${!iterStat.last}" class="my-2">
                    </div>
                </div>
            </div>
    </div>
</div>

    <!-- Función subir foto y vista previa -->
    <script>
                function triggerFileUpload() {
            document.getElementById('pfp-upload').click();
        }

        function previewImage(event) {
            const previewBox = document.getElementById('preview-img');
            const reader = new FileReader();
            
            reader.onload = function() {
                if (reader.readyState === 2) {
                    previewBox.src = reader.result;
                    previewBox.style.display = 'block';
                }
            }
            
            reader.readAsDataURL(event.target.files[0]);
        }

    </script>

    <!-- Función timeAgo y comentarios en JavaScript -->
    <script>
        function timeAgo(dateString) {
            const now = new Date();
            const date = new Date(dateString);
            const diff = Math.floor((now - date) / 1000); // Diferencia en segundos

            if (diff < 60) return `hace ${diff} segundo${diff === 1 ? '' : 's'}`;
            if (diff < 3600) return `hace ${Math.floor(diff / 60)} minuto${Math.floor(diff / 60) === 1 ? '' : 's'}`;
            if (diff < 7200) return `hace ${Math.floor(diff / 3600)} hora${Math.floor(diff / 3600) === 1 ? '' : 's'}`;
            if (diff < 604800) return `hace ${Math.floor(diff / 86400)} día${Math.floor(diff / 86400) === 1 ? '' : 's'}`;
            if (diff < 2419200) return `hace ${Math.floor(diff / 604800)} semana${Math.floor(diff / 604800) === 1 ? '' : 's'}`;
            if (diff < 29030400) return `hace ${Math.floor(diff / 2419200)} mes${Math.floor(diff / 2419200) === 1 ? '' : 'es'}`;
            return `hace ${Math.floor(diff / 29030400)} año${Math.floor(diff / 29030400) === 1 ? '' : 's'}`;
        }

        function updateTimestamps() {
    document.querySelectorAll('.comment-time').forEach(function(element) {
        const dateTime = element.getAttribute('data-time');
        const timeAgoText = timeAgo(dateTime);
        element.textContent = timeAgoText;
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
    updateTimestamps();
    setInterval(updateTimestamps, 60000); // Actualizar cada minuto

    document.addEventListener('click', function(event) {
        if (event.target.classList.contains('comment-btn')) {
            const commentForm = event.target.nextElementSibling;
            commentForm.style.display = commentForm.style.display === 'none' ? 'block' : 'none';
        }
    });
        
        
    document.addEventListener('click', async function(event) {
        if (event.target.classList.contains('submit-comment-btn')) {
            const commentForm = event.target.closest('.comment-form');
            const textarea = commentForm.querySelector('textarea');
            const commentContent = textarea.value.trim();

            if (commentContent) {
                const modal = event.target.closest('.modal');
                const postElement = modal ? modal.querySelector('.comments-list') : commentForm.closest('.comment');

                // Aquí deberías enviar el comentario al servidor
                // Por ejemplo:
                // const postId = event.target.getAttribute('data-post-id');
                // const response = await fetch('/comment', {
                //     method: 'POST',
                //     body: JSON.stringify({ postId, content: commentContent }),
                //     headers: {
                //         'Content-Type': 'application/json',
                //         'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
                //     }
                // });

                const newComment = document.createElement('div');
                newComment.className = 'comment mb-3';
                newComment.innerHTML = `
                    <div class="d-flex align-items-start mb-1">
                        <img src="https://via.placeholder.com/25" class="rounded-circle mr-2" alt="User Profile Picture">
                        <div>
                            <strong class="comment-author">Tú</strong>
                            <span class="comment-time time-text" data-time="${new Date().toISOString()}"></span>
                        </div>
                    </div>
                    <div class="comment-text">${commentContent}</div>
                `;

                if (modal) {
                    postElement.insertBefore(newComment, postElement.firstChild);
                } else {
                    postElement.appendChild(newComment);
                    commentForm.style.display = 'none';
                }

                textarea.value = '';
                updateTimestamps();
            }
        }
    });
});

    </script>

    
    <!--COMMENT MODAL-->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var commentModal = document.getElementById('commentModal');
                commentModal.addEventListener('show.bs.modal', function (event) {
                    // Botón que activó el modal
                    var button = event.relatedTarget;
                    // Extraer información de los atributos data-bs-*
                    var content = button.getAttribute('data-bs-content');
                    var title = button.getAttribute('data-bs-title');

                    // Actualizar el contenido del modal
                    var modalTitle = commentModal.querySelector('.modal-title');
                    var modalBody = commentModal.querySelector('.modal-body');

                    modalTitle.textContent = title;
                    modalBody.textContent = content;
                });
            });
        </script>

    <!--FRIEND REQUEST MODAL-->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                document.addEventListener('click', function(event) {
                    if (event.target.classList.contains('accept-request-button') || event.target.classList.contains('deny-request-button')) {
                        event.preventDefault(); // Prevenir el comportamiento predeterminado del botón

                        // Determinar si es una solicitud de aceptación o de denegación
                        const isAccept = event.target.classList.contains('accept-request-button');
                        const sendRequestUrl = isAccept ? event.target.closest('.Aceptar').getAttribute('data-send-request-url') 
                                                        : event.target.closest('.Denegar').getAttribute('data-send-request-url');

                        // Obtener el ID de solicitud, URL y token CSRF desde los atributos data-* del elemento padre
                        const cardBody = event.target.closest(isAccept ? '.Aceptar' : '.Denegar');
                        if (!cardBody) {
                            console.error('Elemento correspondiente no encontrado');
                            return;
                        }

                        const requestId = cardBody.querySelector('input[name="requestId"]').value;
                        const csrfToken = cardBody.getAttribute('data-csrf-token');

                        if (!requestId || !sendRequestUrl || !csrfToken) {
                            console.error('Faltan datos necesarios para enviar la solicitud');
                            return;
                        }

                        // Crear los parámetros del formulario
                        var formData = new URLSearchParams();
                        formData.append('requestId', requestId);
                        formData.append('_csrf', csrfToken);

                        // Enviar la solicitud POST
                        fetch(sendRequestUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded'
                            },
                            body: formData.toString()
                        })
                        .then(response => {
                            if (response.ok) {
                                return response.json(); // Esperar la lista actualizada de solicitudes
                            } else {
                                alert('Error al procesar la solicitud de amistad');
                                throw new Error('Error al procesar la solicitud de amistad');
                            }
                        })
                        .then(data => {
                            // Actualizar el modal con las solicitudes restantes
                            actualizarSolicitudes(data);
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                    }
                });
            });

            function actualizarSolicitudes(requests) {
                const solicitudesContainer = document.querySelector('#solicitudes .modal-body ul');
                solicitudesContainer.innerHTML = '';

                requests.forEach(request => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <p>Enviado por: <span>${request.usuario.username}</span></p>
                        <p>Fecha: <span>${request.fechaAmistad}</span></p>
                        <p>Estado: <span>${request.estado}</span></p>
                        <div class="Aceptar" data-send-request-url="/accept-request" data-csrf-token="${request.csrfToken}">
                            <input type="hidden" name="requestId" value="${request.id}">
                            <button type="button" class="btn btn-aceptar btn-sm accept-request-button">Aceptar</button>
                        </div>
                        <div class="Denegar" data-send-request-url="/deny-request" data-csrf-token="${request.csrfToken}">
                            <input type="hidden" name="requestId" value="${request.id}">
                            <button type="button" class="btn btn-denegar btn-sm deny-request-button">Denegar</button>
                        </div>
                    `;
                    solicitudesContainer.appendChild(li);
                });
            }

        </script>

        <script>
            function toggleLike(postId, username) {
                fetch('/toggleLike?postId=' + postId + '&username=' + username, {
                    method: 'POST'
                })
                .then(response => response.json())
                .then(data => {
                    // Actualiza la interfaz según la respuesta
                })
                .catch(error => console.error('Error:', error));
            }
        </script>
        <script>
            $(document).ready(function() {
                $('form[id^="marcar-notificacion-"]').on('submit', function(e) {
                    e.preventDefault();
                    var form = $(this);
                    var notificationItem = form.closest('.notification-item');
                    
                    $.post(form.attr('action'), form.serialize(), function(response) {
                        if (response === "OK") {
                            notificationItem.removeClass('unread').addClass('read');
                            notificationItem.find('.unread-indicator').remove();
                            updateNotificationCount();
                        }
                    });
                });
            
                function updateNotificationCount() {
                    var count = $('.notification-item.unread').length;
                    var $badge = $('.nav-link .badge');
                    if (count > 0) {
                        $badge.text('(' + count + ')');
                    } else {
                        $badge.remove();
                    }
                }
            });
            </script>
            
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/src/main/resources/static/commentsSection.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>

</html>